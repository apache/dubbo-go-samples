# Generic Invocation

Generic invocation is mainly used when the client does not have API interface or model class, all POJOs in parameters and return values are represented by map or other generic data structures. Commonly used for framework integration such as: implementing a common service testing framework, all service implementations can be invoked via `GenericService`. For more information please visit our documentation.

## Getting Started

You should provide the information of config for both provider and consumer, in this case, we use `default` directory as an example.

```shell
export CONF_PROVIDER_FILE_PATH="$(pwd)/default/go-server/conf/server.yml"
export CONF_CONSUMER_FILE_PATH="$(pwd)/default/go-client/conf/client.yml"
```

ZooKeeper is required as well, you could launch it using docker-compose.

```shell
cd ./default/go-server/docker \
  && docker-compose up -d
```

### Map: Default Way

The case for map is at `default` directory. Launch the provider by the following code.

```shell
cd ./default/go-server/cmd \
  && go run server.go
```

Run the consumer to invoke generic invocations.

```shell
cd ./default/go-client/cmd \
  && go run client.go
```

### Protobuf Json

The case for Protobuf Json is at `protobufjson` directory. The first step is to generate struct definitions with proto file.  (The `user.pb.go` is generated for integrated tests, but we highly recommend you generate by yourself.)

```shell
cd ./protobufjson \
  && protoc --go_out=. user.proto
```

Copy `user.pb.go` file generated by protobuf to provider.

```shell
mv ./protobufjson/user.pb.go ./protobufjson/go-server/pkg
```

Launch the provider by the following code.

```shell
cd ./protobufjson/go-server/cmd \
  && go run server.go
```

Run the consumer to invoke generic invocations.

```shell
cd ./protobufjson/go-client/cmd \
  && go run client.go
```

# Dubbo-Go å¾®æœåŠ¡å•†åŸé¡¹ç›® - Makefile ä½¿ç”¨æŒ‡å—

## ğŸ“‹ é¡¹ç›®æ¦‚è¿°

è¿™æ˜¯ä¸€ä¸ªåŸºäº Dubbo-Go çš„å¾®æœåŠ¡å•†åŸç³»ç»Ÿï¼ŒåŒ…å«5ä¸ªæ ¸å¿ƒæœåŠ¡ï¼š
- **Frontend** - å•†åŸå‰ç«¯ (ç«¯å£: 8080)
- **User** - ç”¨æˆ·æœåŠ¡ (ç«¯å£: 20001)  
- **Detail** - å•†å“è¯¦æƒ…æœåŠ¡ (ç«¯å£: 20002)
- **Order** - è®¢å•æœåŠ¡ (ç«¯å£: 20003)
- **Comment** - è¯„è®ºæœåŠ¡ (ç«¯å£: 20004)

## ğŸš€ å¿«é€Ÿå¼€å§‹

### ä¸€é”®å¯åŠ¨é¡¹ç›®
```bash
make quick-start
```
è¿™ä¸ªå‘½ä»¤ä¼šè‡ªåŠ¨å®Œæˆï¼šåˆå§‹åŒ–ç›®å½• â†’ å®‰è£…ä¾èµ– â†’ æ„å»ºæœåŠ¡ â†’ å¯åŠ¨æ‰€æœ‰æœåŠ¡

### åˆ†æ­¥æ“ä½œ
```bash
# 1. åˆå§‹åŒ–é¡¹ç›®ç›®å½•
make init

# 2. å®‰è£…ä¾èµ–
make install-deps

# 3. æ„å»ºæ‰€æœ‰æœåŠ¡
make build

# 4. å¯åŠ¨æœåŠ¡ (V1ç‰ˆæœ¬)
make start

# æˆ–å¯åŠ¨ V2 ç‰ˆæœ¬æœåŠ¡
make start-v2
```

## ğŸ”§ å¸¸ç”¨å‘½ä»¤

### æœåŠ¡ç®¡ç†
```bash
make start          # å¯åŠ¨æ‰€æœ‰æœåŠ¡ (V1ç‰ˆæœ¬)
make start-v2       # å¯åŠ¨æ‰€æœ‰æœåŠ¡ (V2ç‰ˆæœ¬)
make stop           # åœæ­¢æ‰€æœ‰æœåŠ¡
make restart        # é‡å¯æ‰€æœ‰æœåŠ¡
make status         # æŸ¥çœ‹æœåŠ¡è¿è¡ŒçŠ¶æ€
```

### å¼€å‘å·¥å…·
```bash
make build          # æ„å»ºæ‰€æœ‰æœåŠ¡
make clean          # æ¸…ç†æ„å»ºæ–‡ä»¶
make clean-all      # æ·±åº¦æ¸…ç† (åŒ…æ‹¬æ—¥å¿—å’ŒPIDæ–‡ä»¶)
make logs           # æŸ¥çœ‹æ‰€æœ‰æœåŠ¡æ—¥å¿—
make fmt            # æ ¼å¼åŒ–Goä»£ç 
make vet            # ä»£ç é™æ€æ£€æŸ¥
```

### æµ‹è¯•åŠŸèƒ½
```bash
make test           # è¿è¡Œé¡¹ç›®æµ‹è¯•
make test-user      # æµ‹è¯•ç”¨æˆ·æœåŠ¡å®¢æˆ·ç«¯
make test-detail    # æµ‹è¯•å•†å“è¯¦æƒ…æœåŠ¡å®¢æˆ·ç«¯
make test-order     # æµ‹è¯•è®¢å•æœåŠ¡å®¢æˆ·ç«¯
make test-comment   # æµ‹è¯•è¯„è®ºæœåŠ¡å®¢æˆ·ç«¯
```

### å¼€å‘å·¥å…·
```bash
make dev            # å¼€å‘æ¨¡å¼å¯åŠ¨ (éœ€è¦å…ˆå®‰è£… air)
make proto          # ç”Ÿæˆ Protocol Buffers ä»£ç 
make mod-update     # æ›´æ–°ä¾èµ–æ¨¡å—
```

## ğŸ“ é¡¹ç›®ç»“æ„

å¯åŠ¨åä¼šåˆ›å»ºä»¥ä¸‹ç›®å½•ï¼š
```
shop/
â”œâ”€â”€ bin/            # ç¼–è¯‘åçš„å¯æ‰§è¡Œæ–‡ä»¶
â”œâ”€â”€ logs/           # æœåŠ¡æ—¥å¿—æ–‡ä»¶
â”œâ”€â”€ pids/           # è¿›ç¨‹IDæ–‡ä»¶
â””â”€â”€ Makefile        # æ„å»ºè„šæœ¬
```

## ğŸŒ è®¿é—®åœ°å€

å¯åŠ¨æˆåŠŸåï¼Œå¯ä»¥é€šè¿‡ä»¥ä¸‹åœ°å€è®¿é—®ï¼š
- **å‰ç«¯é¡µé¢**: http://localhost:8080
- **ç”¨æˆ·æœåŠ¡**: localhost:20001
- **å•†å“è¯¦æƒ…æœåŠ¡**: localhost:20002  
- **è®¢å•æœåŠ¡**: localhost:20003
- **è¯„è®ºæœåŠ¡**: localhost:20004

## ğŸ” ç›‘æ§å’Œè°ƒè¯•

### æŸ¥çœ‹æœåŠ¡çŠ¶æ€
```bash
make status
```

### æŸ¥çœ‹æœåŠ¡æ—¥å¿—
```bash
make logs
```

### æŸ¥çœ‹ç‰¹å®šæœåŠ¡æ—¥å¿—
```bash
tail -f logs/frontend.log    # å‰ç«¯æœåŠ¡æ—¥å¿—
tail -f logs/user.log        # ç”¨æˆ·æœåŠ¡æ—¥å¿—
tail -f logs/detail-v1.log   # å•†å“è¯¦æƒ…æœåŠ¡æ—¥å¿—
tail -f logs/order-v1.log    # è®¢å•æœåŠ¡æ—¥å¿—
tail -f logs/comment-v1.log  # è¯„è®ºæœåŠ¡æ—¥å¿—
```

## âš™ï¸ é«˜çº§é…ç½®

### æœåŠ¡ç‰ˆæœ¬åˆ‡æ¢
é¡¹ç›®æ”¯æŒV1å’ŒV2ä¸¤ä¸ªç‰ˆæœ¬çš„æœåŠ¡ï¼š
```bash
make start     # å¯åŠ¨V1ç‰ˆæœ¬
make start-v2  # å¯åŠ¨V2ç‰ˆæœ¬
```

### å¼€å‘æ¨¡å¼
å®‰è£…çƒ­é‡è½½å·¥å…·ï¼š
```bash
go install github.com/cosmtrek/air@latest
make dev
```

### Protocol Buffers
é‡æ–°ç”Ÿæˆprotobufä»£ç ï¼š
```bash
make proto
```

## ğŸ“ å¸¸è§é—®é¢˜

### Q: æœåŠ¡å¯åŠ¨å¤±è´¥æ€ä¹ˆåŠï¼Ÿ
A: æ£€æŸ¥ç«¯å£æ˜¯å¦è¢«å ç”¨ï¼ŒæŸ¥çœ‹æ—¥å¿—æ–‡ä»¶æ’æŸ¥é”™è¯¯ï¼š
```bash
make status
make logs
```

### Q: å¦‚ä½•å®Œå…¨é‡ç½®é¡¹ç›®ï¼Ÿ
A: ä½¿ç”¨æ·±åº¦æ¸…ç†å‘½ä»¤ï¼š
```bash
make stop
make clean-all
make quick-start
```

### Q: å¦‚ä½•åªå¯åŠ¨éƒ¨åˆ†æœåŠ¡ï¼Ÿ
A: å¯ä»¥æ‰‹åŠ¨å¯åŠ¨ç‰¹å®šæœåŠ¡ï¼š
```bash
make build
./bin/frontend &        # åªå¯åŠ¨å‰ç«¯
./bin/user &           # åªå¯åŠ¨ç”¨æˆ·æœåŠ¡
```

## ğŸ› ï¸ å¼€å‘å»ºè®®

1. **å¼€å‘æ—¶ä½¿ç”¨çƒ­é‡è½½**: `make dev`
2. **æäº¤å‰æ£€æŸ¥ä»£ç **: `make fmt && make vet`
3. **å®šæœŸæ›´æ–°ä¾èµ–**: `make mod-update`
4. **è¿è¡Œæµ‹è¯•**: `make test`

## ğŸ“ æŠ€æœ¯æ”¯æŒ

å¦‚é‡åˆ°é—®é¢˜ï¼Œè¯·æŸ¥çœ‹ï¼š
1. æœåŠ¡æ—¥å¿—: `make logs`
2. æœåŠ¡çŠ¶æ€: `make status`
3. é¡¹ç›®æ–‡æ¡£: `READEME_CN.md`
